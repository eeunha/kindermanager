<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<!-- JQuery Mobile을 사용하기 위해 반드시 필요한 태그-->
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
		<!-- JQuery-UI-Map을 사용하기 위해 반드시 필요한 태그-->
		<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
		<script src="ui/min/jquery.ui.map.full.min.js" type="text/javascript"></script>
		<script src="ui/jquery.ui.map.extensions.js" type="text/javascript"></script>
 		<link rel="stylesheet" href="style.css"/>
 		<script type="text/javascript">
			$(document).ready(function() {
				//초기 위치를 성공회대학로 설정
				var StartLatLng = new google.maps.LatLng(37.500627, 126.739325);
				$("#map_canvas").gmap({
					"center" : StartLatLng,
					"zoom" : 18
				});
 				// <현위치> 버튼 처리
				$("#current_location").click(function() {
					$("#map_canvas").gmap("getCurrentPosition", function(position, status) {
						if (status === "OK") {
							var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
							var markerBlue = "footprint.png";
							$("#map_canvas").gmap("get", "map").panTo(latlng);
							$("#map_canvas").gmap("addMarker", {
								"position" : latlng,
								"icon" : markerBlue
							});
						} else {
							alert("현재위치를 찾을 수 없습니다. ");
						}
					});
					//$("#map_canvas").gmap() 끝
				});
				// $("#current_location").click() 끝
				// <핀놓기> 버튼 처리
				$("#put_pin").click(function() {
					// 안산대학교 진리관으로 설정
					var StartLatLng = new google.maps.LatLng(37.487084, 126.826546);
					var markerRed = "image/footprint.png";
					$("#map_canvas").gmap("get", "map").panTo(StartLatLng);
					var curMarker = $("#map_canvas").gmap("addMarker", {
						"position" : StartLatLng,
						"icon" : markerRed
					});
					curMarker.click(function() {
						$("#map_canvas").gmap("openInfoWindow", {
							"content" : "성공회대학교 정보과학관"
						}, this);
					});
 					var StartLatLng2 = new google.maps.LatLng(37.487974, 126.825853);
					var markerRed = "image/footprint.png";
					$("#map_canvas").gmap("get", "map").panTo(StartLatLng);
					var curMarker = $("#map_canvas").gmap("addMarker", {
						"position" : StartLatLng2,
						"icon" : markerRed
					});
					curMarker.click(function() {
						$("#map_canvas").gmap("openInfoWindow", {
							"content" : "성공회대학교 중앙도서관"
						}, this);
					});
 					//$("#map_canvas").gmap("addMarker", {"position": StartLatLng,"icon": markerRed}).click(function() {
					//	$("#map_canvas").gmap("openInfoWindow", { "content": "안산대학교 진리관"},this);
					//}); // $("#map_canvas").gmap("addMarker"") 끝
 				});
				// $("#put_pin") 끝
			});
			//  $(document).ready() 끝
		</script>
	</head>
	<body>
		<div data-role="page" id="page" data-fullscreen="true" class="map_style">
			<div data-role="header" data-position="fixed" id="header">
				<a href="mainpage.html" data-icon="back" data-rel="back" data-direction="reverse" id="buttonBack">이전</a>
				<h1>캠퍼스 맵</h1>
			</div>
			<div data-role="content" class="map_style">
				<div id="map_canvas" class="map_style"></div>
			</div>
			<div data-role="footer" data-position="fixed" data-theme="b">
				<div data-role="navbar">
					<ul>
						<li>
							<a href="#" data-icon="search" id="current_location">현위치 찾기</a>
						</li>
					</ul>
				</div>
				<!-- navbar 끝 -->
			</div>
		</div>
	</body>
</html>